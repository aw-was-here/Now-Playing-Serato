
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>TwitchBot &#8212; Now Playing 0+untagged.1.g777cbea documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Webserver" href="webserver.html" />
    <link rel="prev" title="OBS WebSocket Plug-in" href="obswebsocket.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="twitchbot">
<h1>TwitchBot<a class="headerlink" href="#twitchbot" title="Permalink to this headline">¶</a></h1>
<p>Now Playing support direct integration with Twitch chat by incorporating a very simple
bot. It takes any command and looks for an equivalent twitchbot template
file.</p>
<p>For example, in chat if the user types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!track
</pre></div>
</div>
<p>it will look for a file called <code class="docutils literal notranslate"><span class="pre">twitchbot_track.txt</span></code>.  Permissions for commands may be set
in the Twitchbot settings section.</p>
<p>Additionally, Twitchbot has the ability to send an announcement template to chat when
Now Playing detects a song change.</p>
<section id="creating-a-bot-account">
<h2>Creating a Bot Account<a class="headerlink" href="#creating-a-bot-account" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>In order to get the most out of the Twitchbot, it is recommended to setup another
account on Twitch.  Create the account and be sure to enable:</p>
<ul class="simple">
<li><p>Multiple logins per email</p></li>
<li><p>Two factor authentication (2FA)</p></li>
</ul>
</li>
</ol>
<a class="reference external image-reference" href="images/twitchbot-account-settings.png"><img alt="Account Settings for bots" src="../_images/twitchbot-account-settings.png" /></a>
<ol class="arabic simple">
<li><p>On the bot’s account, go to <a class="reference external" href="https://dev.twitch.tv">Twitch Dev Settings</a> to
register Now Playing.</p>
<ol class="arabic simple">
<li><p>Click Login in the upper right</p></li>
<li><p>Click on “Your Console” in the upper right</p></li>
<li><p>Click on “Applications”</p></li>
<li><p>Click on “Register Your Application”</p></li>
<li><p>Name: login name used by the bot account</p></li>
<li><p>OAuth Redirect URLs: <a class="reference external" href="http://localhost">http://localhost</a></p></li>
<li><p>Category: Chat Bot</p></li>
<li><p>Create</p></li>
<li><p>Click on “Manage” and save a copy of the Client ID</p></li>
</ol>
</li>
<li><p>Get an OAuth Token:</p>
<ol class="arabic simple">
<li><p>Go to <a class="reference external" href="http://twitchapps.com/tmi">TMI</a>.</p></li>
<li><p>Authentication</p></li>
<li><p>Copy the Token down</p></li>
</ol>
</li>
<li><p>Make the bot account a moderator of your channel so that it does not have chat
time limits, etc on it.</p></li>
</ol>
<p>At the end of this process, you should have four pieces of information:</p>
<ul class="simple">
<li><p>Bot’s Username:</p></li>
<li><p>Bot’s ClientID:</p></li>
<li><p>Bot’s Token:</p></li>
<li><p>Your Twitch Stream/Channel:</p></li>
</ul>
<p>You will need to provide all four to the Twitchbot Settings.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Open Settings from the Now Playing icon</p></li>
<li><p>Select Twitchbot from the list of available input sources.</p></li>
</ol>
<a class="reference external image-reference" href="images/twitchbot.png"><img alt="TwitchBot" src="../_images/twitchbot.png" /></a>
<ol class="arabic simple">
<li><p>Check Enable</p></li>
<li><p>Provide the four pieces of authentication information above.</p></li>
<li><p>If you would like to have the bot announce new tracks in chat, select the template.</p></li>
<li><p>Click Save</p></li>
</ol>
</section>
<section id="setting-permissions">
<h2>Setting Permissions<a class="headerlink" href="#setting-permissions" title="Permalink to this headline">¶</a></h2>
<p>By default, all commands are available to everyone on your channel’s chat.  If you wish to
limit commands, add the command to the Twitchbot settings and check the types of users
who should be able to execute them.</p>
</section>
<section id="adding-new-commands">
<h2>Adding New Commands<a class="headerlink" href="#adding-new-commands" title="Permalink to this headline">¶</a></h2>
<p>Sipmly create a new file in the <code class="docutils literal notranslate"><span class="pre">Documents/Now</span> <span class="pre">Playing/template</span></code> directory called
<code class="docutils literal notranslate"><span class="pre">twitchbot_yourcommand.txt</span></code> where <code class="docutils literal notranslate"><span class="pre">yourcommand</span></code> is the actual command that will be
executed by users that has the appropriate template code inside it.
Note that all text will be smashed together as a single line when sent to Twitch, so
be mindful of where to put spaces.</p>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>If the bot never connects, try getting a new OAuth token.</p></li>
<li><p>Be aware that the bot may have trouble connecting if you restart Now Playing too
quickly.  It should eventually rejoin but it may take several minutes.</p></li>
</ul>
</section>
<section id="additional-variables">
<h2>Additional Variables<a class="headerlink" href="#additional-variables" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of templating, the TwitchBot provides the following additional features:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cmduser</p></td>
<td><p>Person, bot, etc that typed the command</p></td>
</tr>
<tr class="row-odd"><td><p>cmdtarget[x]</p></td>
<td><p>The x’th target on the command, starting with 0.  For example, if the command was <cite>!so modernmeerkat</cite>,
then <cite>{{ cmdtarget[0] }}</cite> will have <cite>modernmeerkat</cite> in it. See below for an example.</p></td>
</tr>
</tbody>
</table>
<section id="multiple-targets">
<h3>Multiple Targets<a class="headerlink" href="#multiple-targets" title="Permalink to this headline">¶</a></h3>
<p>One of the more advanced capabilities that the TwitchBot supports is a variable number of targets.  This feature
allows for your users to use one command to perform actions on, for example, multiple users.</p>
<p>A simple example. Given this template file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="p">{{</span> <span class="n">cmduser</span> <span class="p">}}</span> <span class="n">hugs</span> <span class="o">@</span><span class="p">{{</span> <span class="n">cmdtarget</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">}}</span>
</pre></div>
</div>
<p>a user typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>modernmeerkat: !hug twitch
</pre></div>
</div>
<p>Would result in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bot</span><span class="p">:</span> <span class="nd">@modernmeerkat</span> <span class="n">hugs</span> <span class="nd">@twitch</span>
</pre></div>
</div>
<p>But this can be expanded to do multiple users at once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="p">{{</span> <span class="n">cmduser</span> <span class="p">}}</span> <span class="n">sends</span> <span class="n">hugs</span> <span class="n">to</span> <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">people</span> <span class="ow">in</span> <span class="n">cmdtarget</span> <span class="o">%</span><span class="p">}</span><span class="o">@</span><span class="p">{{</span> <span class="n">people</span> <span class="p">}}</span> <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>such that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>modernmeerkat: !hug person1 person2 person3
</pre></div>
</div>
<p>results in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bot</span><span class="p">:</span> <span class="nd">@modernmeerkat</span> <span class="n">sends</span> <span class="n">hugs</span> <span class="n">to</span> <span class="nd">@person1</span> <span class="nd">@person2</span> <span class="nd">@person3</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Now Playing</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/m3u.html">M3U Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/mpris2.html">MPRIS2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/serato.html">Serato</a></li>
<li class="toctree-l1"><a class="reference internal" href="obswebsocket.html">OBS WebSocket Plug-in</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">TwitchBot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-bot-account">Creating a Bot Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-permissions">Setting Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-new-commands">Adding New Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-variables">Additional Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webserver.html">Webserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../templatevariables.html">Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comparisons.html">Versus Comparisons</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="obswebsocket.html" title="previous chapter">OBS WebSocket Plug-in</a></li>
      <li>Next: <a href="webserver.html" title="next chapter">Webserver</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Allen Wittenauer.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/output/twitchbot.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>